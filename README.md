# ü§ñ GoalBuddy21 - Telegram Bot

**GoalBuddy21** ‚Äî —á–∞—Ç-–±–æ—Ç –¥–ª—è —Ç—Ä—ë—Ö–¥–Ω–µ–≤–Ω–æ–≥–æ –∏–Ω—Ç–µ–Ω—Å–∏–≤–∞ –≤ –®–∫–æ–ª–µ 21, –ø–æ–º–æ–≥–∞—é—â–∏–π —É—á–∞—Å—Ç–Ω–∏–∫–∞–º —Å—Ç–∞–≤–∏—Ç—å —Ü–µ–ª–∏, –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –∏ –ø–æ–ª—É—á–∞—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É.

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–î–µ–Ω—å 1**: –ü–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –ª–∏—á–Ω–æ–π —Ü–µ–ª–∏ –æ–±—É—á–µ–Ω–∏—è
- **–î–µ–Ω—å 2**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
- **–î–µ–Ω—å 3**: –°–∞–º–æ–æ—Ü–µ–Ω–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —Ü–µ–ª–∏ (0-100%)
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Google Sheets**: –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ñ–∞—Å–∏–ª–∏—Ç–∞—Ç–æ—Ä–∞–º–∏

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone https://github.com/jvityazeva-gif/bot21.git
cd bot21
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
python -m venv venv

# Windows
venv\Scripts\activate

# Linux/Mac
source venv/bin/activate
```

### 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ `.env.example` –≤ `.env`:

```bash
cp .env.example .env
```

–ó–∞–ø–æ–ª–Ω–∏—Ç–µ `.env` —Ñ–∞–π–ª:

```env
BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–æ—Ç_BotFather
SPREADSHEET_ID=id_–≤–∞—à–µ–π_google_—Ç–∞–±–ª–∏—Ü—ã
CREDENTIALS_PATH=credentials/google_credentials.json
SCHEDULER_TIMEZONE=Europe/Moscow
LOG_LEVEL=INFO
TESTING_MODE=True
```

### 5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Google Sheets API

1. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –≤ [Google Cloud Console](https://console.cloud.google.com/)
2. –í–∫–ª—é—á–∏—Ç–µ Google Sheets API
3. –°–æ–∑–¥–∞–π—Ç–µ Service Account
4. –°–∫–∞—á–∞–π—Ç–µ JSON –∫–ª—é—á –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∫–∞–∫ `credentials/google_credentials.json`
5. –ü—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ –¥–æ—Å—Ç—É–ø Service Account –∫ –≤–∞—à–µ–π Google —Ç–∞–±–ª–∏—Ü–µ

### 6. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

```bash
python run.py
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ batch —Ñ–∞–π–ª (Windows):
```bash
start_bot.bat
```

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
goalbuddy21/
‚îú‚îÄ‚îÄ bot/
‚îÇ   ‚îú‚îÄ‚îÄ handlers.py      # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥ –∏ —Å–æ–æ–±—â–µ–Ω–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ keyboards.py     # –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã Telegram
‚îÇ   ‚îú‚îÄ‚îÄ messages.py      # –®–∞–±–ª–æ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ states.py        # FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ main.py          # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ settings.py      # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îî‚îÄ‚îÄ sheets.py        # –†–∞–±–æ—Ç–∞ —Å Google Sheets
‚îú‚îÄ‚îÄ scheduler/
‚îÇ   ‚îî‚îÄ‚îÄ tasks.py         # –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îú‚îÄ‚îÄ logger.py        # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ   ‚îî‚îÄ‚îÄ validators.py    # –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ .env.example         # –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ requirements.txt     # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îî‚îÄ‚îÄ run.py              # –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞
```

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Python 3.13**
- **python-telegram-bot 22.5** - Telegram Bot API
- **gspread 5.12** - Google Sheets –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- **APScheduler 3.10** - –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á
- **oauth2client 4.1** - –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è Google

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö Google Sheets

### –õ–∏—Å—Ç "UserData"

| –°—Ç–æ–ª–±–µ—Ü | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| user_id | Telegram ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| username | @username |
| full_name | –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| goal_text | –¢–µ–∫—Å—Ç —Ü–µ–ª–∏ |
| goal_date | –î–∞—Ç–∞ –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ü–µ–ª–∏ |
| progress_day2 | –û—Ç–≤–µ—Ç –Ω–∞ –î–µ–Ω—å 2 |
| progress_date | –î–∞—Ç–∞ –æ—Ç–≤–µ—Ç–∞ –î–µ–Ω—å 2 |
| final_percent | –§–∏–Ω–∞–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ (0-100%) |
| final_date | –î–∞—Ç–∞ —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –æ—Ü–µ–Ω–∫–∏ |
| current_state | –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å |

## üß™ –†–µ–∂–∏–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `TESTING_MODE=True` –≤ `.env` –¥–ª—è:
- –°–æ–∫—Ä–∞—â–µ–Ω–∏—è –∑–∞–¥–µ—Ä–∂–∫–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è —Å 24 —á–∞—Å–æ–≤ –¥–æ 1 –º–∏–Ω—É—Ç—ã
- –ë—ã—Å—Ç—Ä–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π

## üìù –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

- `/start` - –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É –∏ –ø–æ—Å—Ç–∞–≤–∏—Ç—å —Ü–µ–ª—å
- `/assess` - –û—Ü–µ–Ω–∏—Ç—å —Å–≤–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å (0-100%)

## üöÇ –î–µ–ø–ª–æ–π –Ω–∞ Railway

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. –°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç: https://railway.app/
2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
3. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–∞—Ä—É–∂–∏—Ç `Dockerfile`
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (—Å–º. `.env.example`)
5. –î–µ–ø–ª–æ–π!

**–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è**: –°–º. [RAILWAY_DEPLOY.md](RAILWAY_DEPLOY.md)

### –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Docker

```bash
# –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞
docker build -t goalbuddy21 .

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker run --env-file .env -v ./credentials:/app/credentials goalbuddy21
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≥–æ—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç:
```bash
# Windows
.\docker-test.ps1

# Linux/Mac
./docker-test.sh
```

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è **–í–∞–∂–Ω–æ**: –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ –≤ Git:
- `.env` —Ñ–∞–π–ª (—Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–∫–µ–Ω—ã)
- `credentials/` –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é (Google API –∫–ª—é—á–∏)
- `logs/` –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é

–î–ª—è Railway –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è!

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

## üë• –ê–≤—Ç–æ—Ä—ã

–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ –¥–ª—è –®–∫–æ–ª—ã 21

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- **Railway Deploy Guide**: [RAILWAY_DEPLOY.md](RAILWAY_DEPLOY.md)
- **Telegram Bot API**: https://core.telegram.org/bots/api
- **Google Sheets API**: https://developers.google.com/sheets/api

